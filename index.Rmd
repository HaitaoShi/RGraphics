--- 
title: "R 语言绘图基础"
subtitle: "R Graphics Foundations"
author: "黄湘云"
date: "`r format(Sys.time(), tz = 'Asia/Taipei', usetz = TRUE)`"
site: bookdown::bookdown_site
documentclass: book
papersize: b5
linestretch: 1.25 # 1.25 倍行间距
#lof: yes
#lot: yes
#indent: 40pt # 段首缩进两个汉字
toccolor: magenta
fontsize: 10pt
secnumdepth: 2
colorlinks: yes
classoption: "UTF8,twoside"
bibliography: [latex/book.bib, latex/refer.bib, packages.bib]
biblio-style: apalike
link-citations: yes
subparagraph: true
compact-title: true
geometry: [b5paper, tmargin=2.5cm, bmargin=2.5cm, lmargin=3.5cm, rmargin=2.5cm]
description: "R Graphics Foundations. 学习 R Base Graphics 部分的测试代码，函数各参数含义的查询手册，主要目的是帮助读者读懂参考手册，写作过程分步走：学习知识，记笔记，可写本书上或博客上，博客侧重在某个点的内容扩展上，书籍需要照顾覆盖面，各部分平衡一点，整理心得，再次修改笔记以符合书籍。所有的案例都基于真实数据集，基础R打包的数据集都是真实的，扩展案例就是在规模上进行扩展，选用基础R中的数据，原因是收集清洗真实数据是比较麻烦和费时间的事情"
keywords: ["graphics", "grid", "lattice", "ggplot2"]
# twitter-handle: tom_hengl
# cover-image: figures/f0_web.png
# url: 'http\://soilmapper.org'
# layout: default
# comments: true
---

\mainmatter

`r if (knitr::is_latex_output()) '<!--'` 

# 准备 {#prerequisites}
\index{bookdown}
\index{knitr}
\index{pandoc}

- [字符串处理与正则表达式]{.todo}
- [动手学习Python]{.todo}
- [自然语言处理与Python实现]{.todo}
- [容器技术与 Docker]{.todo}
- [数据结构与算法基础C++]{.todo}


The **bookdown** package [@xie_2015_knitr] can be installed from CRAN or Github:

::: base
This is a _sample_ book written in **Markdown**. You can use anything that Pandoc's Markdown supports, e.g., a math equation $a^2 + b^2 = c^2$.
:::

```{r eval=FALSE,echo=TRUE}
install.packages("bookdown")
# or the development version
# devtools::install_github("rstudio/bookdown")
```

## 为什么选择 R 语言 {#why-r}

不管是在本科生还是研究生水平的教学中，R 语言都是帮助学习数理统计的[理想平台][why-r]

[why-r]: https://www.ejwagenmakers.com/misc/HortonEtAl2004.pdf


## 记号约定 {#conventions}

写作风格，R 包名称都加粗表示，如 **bookdown**， **rmarkdown** 等，软件、编程语言名称保持原样，如 TinyTeX，LyX，TeXLive，R，Python，Stan，C++，SQL等，在代码块中，我们不使用`R>`或`+`，代码输出结果用`#>`注释

## 本书结构 {#structure-of-book}



## 相关资源 {#related-books}

穷毕生之力修习小无相功，这是一门内家功夫

1. 道家的小无相功
   - 高级R语言编程 [Advanced R](https://adv-r.hadley.nz)
   
1. 编程指南
   - R 语言编程风格指南  [R Style Guide](https://style.tidyverse.org/)
   - 高效R语言编程 [Efficient R programming](https://csgillespie.github.io/efficientR)

1. 开发 R 包
   - 开发 R 包 [R packages](http://r-pkgs.had.co.nz)  [Writing R Extensions](https://cran.r-project.org/doc/manuals/r-release/R-exts.html)

1. 数据科学 
   - 数据科学与 R 语言 [R for data science](https://r4ds.had.co.nz/)
   - 可解释的机器学习 [Interpretable Machine Learning: A Guide for Making Black Box Models Explainable](https://christophm.github.io/interpretable-ml-book/)
   - 数据科学入门 [Introduction to Data Science](https://rafalab.github.io/dsbook/) Rafael A. Irizarry
   - 特征工程与特征选择 [Feature Engineering and Selection: A Practical Approach for Predictive Models](http://www.feat.engineering) Max Kuhn and Kjell Johnson
   - 统计机器学习与应用 [An Introduction to Statistical Learning with Applications in R](https://www-bcf.usc.edu/~gareth/ISL/) [PDF](https://www-bcf.usc.edu/~gareth/ISL/ISLR%20Seventh%20Printing.pdf)
   - 机器学习与R语言 [Machine Learning in R](https://mlr.mlr-org.com/)
   - 贝叶斯数据分析 [Bayesian Data Analysis](http://www.stat.columbia.edu/~gelman/book/)
   - 空间点模式：理论与应用 [Spatial Point Patterns: Methodology and Applications with R](https://spatstat.org)
   - 应用时间序列分析与R语言 [Time Series Analysis with Applications in R](http://homepage.divms.uiowa.edu/~kchan/TSA.htm)
   - 时间序列预测预测：原理与实践 [Forecasting: Principles and Practice](https://www.otexts.org/fpp2/) [Rob J Hyndman](https://robjhyndman.com/)
   - 线性模型与R语言 [Extending the Linear Model with R](http://people.bath.ac.uk/jjf23/ELM/) [Julian Faraway](https://farawaystatistics.wordpress.com/)

1. 数据可视化   
   - 数据可视化基础 [Fundamentals of Data Visualization](https://serialmentor.com/dataviz)
   - 数据可视化与R语言 [Data Visualisation with R --- 100 Examples](http://www.datavisualisation-r.com/)
   - R语言绘图手册 [R Graphics Cookbook](https://github.com/wch/gcookbook) [PDF](https://raw.githubusercontent.com/irichgreen/GCookBook/master/R%20Graphics%20Cookbook.pdf)
   - 数据分析与图形艺术 [ggplot2: Elegant Graphics for Data Analysis](https://link.springer.com/book/10.1007%2F978-3-319-24277-4) [PDF](http://moderngraphics11.pbworks.com/f/ggplot2-Book09hWickham.pdf)
   - 数据可视化：实践指南 [Data Visualization: A practical introduction](https://socviz.co/) [Github](https://github.com/kjhealy/socviz)
   - 可视化数据分析与R语言 [Graphical Data Analysis with R](http://www.gradaanwr.net/)

1. 文本挖掘
   - 初识命令行 [The Unix Workbench](https://seankross.com/the-unix-workbench/)
   - 数据科学与命令行 [Data Science at the Command Line](https://www.datascienceatthecommandline.com/)
   - 字符串处理 [Handling Strings with R](https://www.gastonsanchez.com/r4strings/)
   - 文本挖掘 [Text Mining with R: A Tidy Approach](https://www.tidytextmining.com/)

1. 动态文档
   - 动态文档 [R Markdown: The Definitive Guide](https://bookdown.org/yihui/rmarkdown/)
   - 写作 [bookdown: Authoring Books and Technical Documents with R Markdown](https://bookdown.org/yihui/bookdown)
   - 网站 [blogdown: Creating Websites with R Markdown](https://bookdown.org/yihui/blogdown/)

1. 模型部署
   - Docker 入门 [A Docker Tutorial for Beginners](https://docker-curriculum.com/)
   - Docker 从入门到实践 [docker practice](https://www.gitbook.com/book/yeasy/docker_practice)

1. 学习 R
   - R 安装与管理 [R Installation and Administration](https://cran.r-project.org/doc/manuals/r-release/R-admin.html)
   - R 导论 [An Introduction to R](https://cran.r-project.org/doc/manuals/r-release/R-intro.html)
   - 数据导入导出 [R Data Import/Export](https://cran.r-project.org/doc/manuals/r-release/R-data.html)
   - 高频问题合集 [R-FAQs](https://cran.r-project.org/faqs.html)

1. 学习 Python
   - Python 最佳实践指南 [Hitchhiker's Guide to Python](https://pythonguidecn.readthedocs.io/zh/latest/)

更多在线书籍合集 https://bookdown.org 还有一个[传送门](http://gen.lib.rus.ec/)

学习 R 语言，不在编程而在统计，其天花板就是数理统计 [COPSS大师开设的课程](https://en.wikipedia.org/wiki/COPSS_Presidents'_Award)

1. Tony Cai
   - Fall 2018: STAT 972: [Advanced Topics in Mathematical Statistics](http://www-stat.wharton.upenn.edu/~tcai/Stat972-Syllabus-Fall18.pdf)
1. Ben Bolker
   - fall 2018: STAT 4/6c03 [Generalized Linear Models](https://bbolker.github.io/stat4c03/) 
   - Morelia 2018 workshop [Generalized Linear/Mixed models](https://bbolker.github.io/morelia_2018)

## 关于作者 {#about-author}

热心开源事业，目前在统计之都担任副主编 Associated Editor of Captial of Statistics

## 软件信息 {#softwares-rsession-info}

重现本书内容需要的 R 包

```{r sessioninfo,eval=FALSE,echo=TRUE}
xfun::session_info(packages = c(
  "colorspace",
  "bookdown", "rmarkdown",
  "tikzDevice", "fontcm"
))
```
```
R version 3.5.2 (2018-12-20)
Platform: x86_64-w64-mingw32/x64 (64-bit)
Running under: Windows 8.1 x64 (build 9600)

Locale:
  LC_COLLATE=Chinese (Simplified)_China.936 
  LC_CTYPE=Chinese (Simplified)_China.936   
  LC_MONETARY=Chinese (Simplified)_China.936
  LC_NUMERIC=C                              
  LC_TIME=Chinese (Simplified)_China.936    

Package version:
  base64enc_0.1.3  bookdown_0.9     colorspace_1.4.0 digest_0.6.18   
  evaluate_0.12    filehash_2.4.1   fontcm_1.1       glue_1.3.0      
  graphics_3.5.2   grDevices_3.5.2  highr_0.7        htmltools_0.3.6 
  jsonlite_1.6     knitr_1.21       magrittr_1.5     markdown_0.9    
  methods_3.5.2    mime_0.6         png_0.1.7        Rcpp_1.0.0      
  rmarkdown_1.11   stats_3.5.2      stringi_1.2.4    stringr_1.3.1   
  tikzDevice_0.12  tinytex_0.9      tools_3.5.2      utils_3.5.2     
  xfun_0.4         yaml_2.2.0      

Pandoc version: 2.5
```

> 为了重复实现，我准备了一个虚拟机，存放在百度云盘上，链接: <https://pan.baidu.com/s/1K7R55QfFHGu6_QsyUlpCJA> 密码: 2ixt
登陆用户名：xyhuang 密码：cloud

当然，你也可以选择来自 rocker 项目的Docker 镜像，包含的数据分析环境是 `rocker/verse`

```bash
docker run --name rstudio -d -p 8787:8787 -e ROOT=TRUE \
 -e USER=cloud -e PASSWORD=cloud rocker/verse
```

在本地拉取了一个名叫 rstudio 的镜像，从虚拟机到宿主机的映射端口是，8787 端口是虚拟机中 RStudio IDE 默认占用的，这样就可以在宿主机的浏览器里打开链接 <http://localhost:8787>

```{r include=FALSE}
# automatically create a bib database for R packages
knitr::write_bib(c(
  .packages(), 'bookdown', 'knitr', 'rmarkdown', 'tikzDevice'
), 'packages.bib')
```

`r if (knitr::is_latex_output()) '-->'`
