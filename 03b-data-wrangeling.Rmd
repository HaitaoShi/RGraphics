# 数据变形者 {#data-transformer}

函数式编程 Functional Programming Languages 用于数据处理

future.apply: Apply Function to Elements in Parallel using Futures

<https://github.com/HenrikBengtsson/future.apply>

```{r, echo=TRUE,R.options=list(tidyverse.quiet = TRUE)}
library(tidyverse)
```

数据操作的语法

第一代

1. reshape 使用函数 `melt` 和 `cast` 聚合数据
1. reshape2 是 reshape 的继任者，提供两个函数 `melt` 和 `cast` 聚合数据
1. plyr 统一拆分(split)，计算(apply)，合并(combine)的数据处理流

第二代

1. dplyr 操作数据的语法
1. dbplyr 给 dplyr 提供数据库接口支持
1. sparklyr 给 dplyr 提供 Spark 接口支持

数据清洗

1. tidyr 提供 `spread` 和 `gather` 两个函数清洗数据

Garrett Grolemund 在 RStudio 主要从事教育教学，参考 [Materials for the Tidyverse Train-the-trainer workshop](https://github.com/rstudio-education/teach-tidy) 和 [The Tidyverse Cookbook](https://rstudio-education.github.io/tidyverse-cookbook/)

Dirk Eddelbuettel 的[Getting Started in R -- Tinyverse Edition](https://github.com/eddelbuettel/gsir-te)

## 高阶函数 {#Higher-Order-Functions}

参数为函数，返回值也是函数




## `Map` 与 `Reduce` {#high-order-function}

在 R 语言里玩转`apply`， `Map()` 和 `Reduce()`[^apply-family]，下面分别以提取合并多张 XLSX 表格[^openxl-map]，分组计算[^by-group-calculation] 和子集操作 [^subsetting] 为例，从函数式编程到 MapReduce [^funcprog-map-reduce]，制作数据透视表[^pivot-tables]，用于数据处理的函数式编程和单元测试 Functional programming and unit testing for data munging with R 特别是第三章 <https://b-rodrigues.github.io/fput/>，然后是函数式编程与数据建模 Modeling data with functional programming in R[^modeling-funcprog]

并行计算小抄 [Parallel_Computing](https://github.com/ardeeshany/Parallel_Computing)

```{r,echo=TRUE}
add <- function(x) Reduce("+", x)
add(list(1, 2, 3))
add_accuml <- function(x) Reduce("+", x, accumulate = TRUE)
add_accuml(list(1, 2, 3))
```

## 并行计算 {#parallel-computing}



[Gord Sissons](http://www.teraproc.com/r-blog/) 发布了系列关于如何在 R 环境下并行的文章

[CUDA 加速](https://devblogs.nvidia.com/accelerate-r-applications-cuda/)


[^modeling-funcprog]: https://cartesianfaith.files.wordpress.com/2015/12/rowe-modeling-data-with-functional-programming-in-r.pdf
[^funcprog-map-reduce]: https://cartesianfaith.com/2015/09/17/from-functional-programming-to-mapreduce-in-r/
[^pivot-tables]: https://digitheadslabnotebook.blogspot.com/2010/01/pivot-tables-in-r.html
[^openxl-map]: https://trinkerrstuff.wordpress.com/2018/02/14/easily-make-multi-tabbed-xlsx-files-with-openxlsx/)
[^by-group-calculation]: https://statcompute.wordpress.com/2018/09/03/playing-map-and-reduce-in-r-by-group-calculation/
[^subsetting]: https://statcompute.wordpress.com/2018/09/08/playing-map-and-reduce-in-r-subsetting/
[^apply-family]: https://stackoverflow.com/questions/3505701/grouping-functions-tapply-by-aggregate-and-the-apply-family
